function fe(e,t="ymd"){if(e=e?.trim(),!e)return new Date;let r=e?.split(/[T :\-\/.,]/g).filter(a=>!!a.trim()),n=()=>{let a=[...t].reduce((g,d,T)=>(g[d]=T,g),{}),u=r.slice(0,3),c=r.slice(3),[i,l,y,D,s,m,f]=[+u[a.y],+u[a.m]-1,+u[a.d]].concat([...Array(4)].map((g,d)=>+c[d]||0));return i<1900?new Date(new Date(i,l,y,D,s,m,f).setFullYear(i)):new Date(i,l,y,D,s,m,f)},o={get cando(){return n()},get cannot(){if(!e||r?.length<3)return console.error(`DateTools::parse: can't convert "${e||"empty date string"}" to ES-Date. Result will be current Date`),!0}};return o.cannot?new Date:o.cando}function me(e,t){return[`${e&&!(Array.isArray(e)&&e.length<1)?`l:${e}`:""}`,`${t?`tz:${t}`:""}`].filter(r=>r).join(",")}function $(e="en-GB"){return e=O({locale:e}).locale,{long:[...Array(7).keys()].map(t=>new Date(Date.UTC(1970,0,4+t)).toLocaleDateString(e,{timeZone:"Etc/UTC",weekday:"long"})),short:[...Array(7).keys()].map(t=>new Date(Date.UTC(1970,0,4+t)).toLocaleDateString(e,{timeZone:"Etc/UTC",weekday:"short"}))}}function I(e="en-GB"){return e=O({locale:e}).locale,{long:[...Array(12).keys()].map(t=>new Date(Date.UTC(1970,t,1)).toLocaleDateString(e,{timeZone:"Etc/UTC",month:"long"})),short:[...Array(12).keys()].map(t=>new Date(Date.UTC(1970,t,1)).toLocaleDateString(e,{timeZone:"Etc/UTC",month:"short"}))}}function O({locale:e,timeZone:t,logError:r=!0}={}){let n=o=>console.error(`invalid locale (time zone: "${o.timeZone}", locale: "${o.locale}"), associated your locale instead`);try{return Intl.DateTimeFormat(e,{timeZone:t}).resolvedOptions()}catch{return r&&n({locale:e,timeZone:t}),Intl.DateTimeFormat().resolvedOptions()}}function N({locale:e,timeZone:t}={}){let r=O({locale:e,timeZone:t},!0);return Object.freeze({...r,formatOptions:me(r.locale,r.timeZone)})}function Y(e){return Object.defineProperties(e,{clone:{value:function(r){return r?.clone()||e()}},now:{get(){return e()}},parse:{value(t,r="ymd"){return e(fe(t,r))}},localWeekdayNames:{value({locale:t,format:r}={}){return $(t,r)}},localMonthNames:{value({locale:t,format:r}={}){return I(t,r)}},daysInMonth:{value(t){return t>=1&&t<=12?new Date(1970,t,0).getDate():`${t} not between 1 and 12`}}}),e}function x(e){return!Number.isNaN(+e)&&e||new Date}function z(e){let t=new Date;switch(!0){case e?.constructor===String:return x(new Date(e));case(Array.isArray(e)&&e.map(Number).length===e.length):return x(new Date(...e));case e?.constructor===Date:return x(e);default:return t}}var V=de();function de(){let[e,t,r,n]=["2-digit","numeric","long","short"],o={fixed:{MM:{month:r},M:{month:n},m:{month:t},mm:{month:e},yyyy:{year:t},yy:{year:e},WD:{weekday:r},wd:{weekday:n},d:{day:t},dd:{day:e},h:{hour:t},hh:{hour:e},mi:{minute:t},mmi:{minute:e},s:{second:t},ss:{second:e},ms:{fractionalSecondDigits:3},tz:{timeZoneName:"shortOffset"},dl:{locale:"default"},h12:{hour12:!1},yn:{yearName:""},ry:{relatedYear:!0},msp:{fractionalSecond:!0}},dynamic:{tzn:s=>({timeZoneName:s.slice(4)}),hrc:s=>({hourCycle:`h${s.slice(4)}`}),ds:s=>({dateStyle:s.slice(3)}),ts:s=>({timeStyle:s.slice(3)}),tz:s=>({timeZone:s.slice(3)}),e:s=>({era:s.slice(2)}),l:s=>({locale:s.slice(2)})}},a={...o,retrieveDyn(s){let m=s?.slice(0,s.indexOf(":"));return o.dynamic[m]&&o.dynamic[m](s)},get re(){return new RegExp(`\\b(${Object.keys(o.fixed).join("|")})\\b`,"g")}},u=(s="dtf",m=0)=>{let f=` ${s.replace(/(?<=\{)(.+?)(?=})/g,d=>`[${m++}]`).replace(/[{}]/g,"").trim()} `,g=s.match(/(?<=\{)(.+?)(?=})/g)||[];return{get texts(){return g},formatString(d){f=d},set formatStr(d){f=d},get formatStr(){return f},get units(){return f.match(a.re)||[]},finalize(d="",T="",S="",w=""){return f.replace(/~([\d+]?)/g,"$1").replace(/dtf/,d).replace(/era/,S).replace(/dp\b|~dp\b/,T).replace(/yn\b/,w).replace(/\[(\d+?)]/g,(b,ie)=>g[ie].trim()).trim()}}},c=s=>s.replace(/\s+/g,""),i=(...s)=>s?.reduce((m,f)=>({...m,...a.retrieveDyn(f)||a.fixed[f]}),a.fixed.dl),l=(s,m,f)=>{let g=i(...c(f).split(",")),d=Intl.DateTimeFormat(g.locale,g).format(s);return m.finalize(d)},y=(s,m,f,g)=>s.toLocaleString(m,{timeZone:f,month:g?n:r}),D=(s,m,f)=>{let g=i(...m.units.concat(c(f).split(",")).flat()),d={...a.fixed},T=(w,b)=>g[w]==="numeric"&&b.startsWith("0")?b.slice(1):b,S=Intl.DateTimeFormat(g.locale,g).formatToParts(s).reduce((w,b)=>b.type==="literal"&&/[ ,/-]/.test(b.value)?w:{...w,[b.type]:T(b.type,b.value)},{});return d.ms=g.fractionalSecondDigits?d.msp:d.ms,d.yyyy=S.relatedYear?d.ry:d.yyyy,m.formatStr=m.formatStr.replace(a.re,w=>/^(M|MM)$/.test(w)?y(s,g.locale,g.timeZone,/^M$/.test(w)):S[Object.keys(d[w]).shift()]||w),m.finalize(void 0,S.dayPeriod,S.era,S.yearName)};return(s,m,f="l:default")=>/ds:|ts:/.test(f)?l(s,u(void 0),f):D(s,u(m||void 0),f)}var H=ge;function ge(){let e=(n,o)=>{let a=isNaN(new Date(n)),u=isNaN(new Date(o));if(a&&!u){let[c,i,l]=Array(3).fill("start- and/or end date are not valid");return{error:!0,message:c,full:i,clean:l}}if(u){let[c,i,l]=Array(3).fill("end date not valid");return{error:!0,message:c,full:i,clean:l}}if(a){let[c,i,l]=Array(3).fill("start date not valid");return{error:!0,message:c,full:i,clean:l}}return{error:!1}},t=r();return function({start:o,end:a}={}){let u=e(o,a);if(u.error)return u;let c=Math.abs(o-a),i=new Date(c),l=i.getUTCFullYear()-1970,y=i.getUTCMonth(),D=i.getUTCDate()-1,s=i.getUTCHours(),m=i.getUTCMinutes(),f=i.getUTCSeconds(),g=i.getUTCMilliseconds(),d=Math.floor(c/1e3/60/1440),T={from:o,to:a,years:l,months:y,days:D,hours:s,minutes:m,seconds:f,milliseconds:g,diffInDays:d};return T.full=t({values:T,full:!0}),T.clean=t({values:T}),T};function r(){let n=(...l)=>y=>l.reduce((D,s)=>s(D),y),o=(l,y)=>l===1?y.slice(0,-1):y;return n(({values:l,full:y})=>[Object.entries(l).filter(([D])=>/^(years|month|days|hours|minutes|seconds)/i.test(D)),y],([l,y])=>y?l:l.filter(([,D])=>y?+D:D>0),l=>l.reduce((y,[D,s])=>[...y,`${s} ${o(s,D)}`],[]),l=>l.length<1?"Dates are equal":`${l.slice(0,-1).join(", ")}${l.length>1?" and ":""}${l.slice(-1).shift()}`)}}var q=ye;function ye(){let e=Object.entries({year:"FullYear",month:"Month",date:"Date",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"}).reduce((r,[n,o])=>({...r,[n]:o,[`${n}s`]:o}),{}),t=function(...r){let n=r.length===1,o=r[0].trim().startsWith("subtract");return o&&(r=n?r[0].trim().replace(/^subtract./i,"").split(", ").map(a=>a.trim()):r.slice(1)),n&&!o&&(r=r[0].split(",").map(a=>a.trim())),r.map(function(a){return a?a.toLowerCase().split(/ /).map(u=>{u=`${u}`.trim();let c=parseInt(u,10);return c?o?-c:+c:u}):!1}).filter(a=>a)};return function(r,...n){if(n.length<1)return r;let o=t(...n);return o.length&&o.forEach(([a,u])=>{u=e[u],+a&&u&&r[`set${u}`](r[`get${u}`]()+ +a)}),r}}var Z=H(),De=Te(),h=q();function C(e,{start:t,end:r,before:n}={}){let o=e.clone().UTC;return t=p(t).UTC,!Number.isNaN(+t)&&!r?n?+o<+t:+o>+t:(r=p(r).UTC,+o>+t&&+o<+r)}function R(e,t,r){return e.localeInfo||(e.localeInfo=N()),V(new Date(e),t,r||e.localeInfo.formatOptions)}function he(e,t){return{first:p(e||new Date).removeTime,second:p(t||new Date).removeTime}}function B(e,t){let{first:r,second:n}=he(e,t),o=Z({start:r,end:n}).diffInDays;return o>0&&+t<+e?-o:o}function J(e){let{locale:t,timeZone:r,formats:n}=e.localeInfo,o=e.format("MM|WD",n).split("|");return{locale:t,timeZone:r,monthName:o[0],dayName:o[1],dayNames:$(e.locale),monthNames:I(e.locale)}}function Q(e){let[t,r,n,o]=U(e);return Object.freeze({hours:t,minutes:r,seconds:n,milliseconds:o})}function X(e){let[t,r,n]=k(e);return Object.freeze({year:t,month:r,date:n})}function K(e,{sunday:t=!1,midnight:r=!1}={}){return v(e,{day:t?"sun":"mon",midnight:r,forFirstWeekday:!0})}function U(e){return e.format("h-mi-s").split(/-/).map(Number).concat(e.getMilliseconds())}function k(e){let t=e.format("yyyy-m-d").split(/-/).map(Number);return t[1]-=1,t}function ee(e){return e.format("yyyy-m-d-h-mi-s").split(/-/).map(Number).concat(e.getMilliseconds())}function A(e){return new Date(e.year,e.month+1,0,0,0,0).getDate()}function v(e,{day:t,next:r=!1,forFirstWeekday:n=!1}={}){let o=De(t?.toLowerCase()),a=p(new Date(...e.dateValues),e.localeInfo);if(o<0)return console.log("wtf",t,o),a;let u=a.getDay();if(n&&u===o)return e;let c=r?1:-1;return i(u);function i(l){return l!==o?i(a.add(`${c} days`).getDay()):a}}function P(e){e.localeInfo||(e.localeInfo=N());let{locale:t,timeZone:r}=e.localeInfo;return new Date(e).toLocaleString(t,{timeZone:r})}function _(e){return e={timeZone:e,hourCycle:"h23"},new Date(new Date().toLocaleString("en",e))}function F(e,t){return pe(e,t||p({timeZone:"Etc/UTC"}))}function pe(e,t){if(!t.clone)return"00:00";let r=_(e.timeZone),n=_(t.timeZone),o=new Date(Math.abs(r-n)),a=r<n,[u,c]=[`${o.getHours()}`.padStart(2,"0"),`${o.getMinutes()}`.padStart(2,"0")];return`${a?"-":u==="00"&&c==="00"?"":"+"}${u}:${c}`}function te(e,{year:t,month:r,date:n}={}){return M(t)&&e.setFullYear(t),M(n)&&e.setDate(n),M(r)&&e.setMonth(r-1),e}function re(e,{hours:t,minutes:r,seconds:n,milliseconds:o}={}){return M(t)&&e.setHours(t),M(r)&&e.setMinutes(r),M(n)&&e.setSeconds(n),M(o)&&e.setMilliseconds(o),e}function Te(){let e={short:"sun,mon,tue,wed,thu,fri,sat".split(","),long:"sunday,monday,tuesday,wednesday,thursday,friday,saturday".split(",")};return function(t){if(!t)return-1;let r=e.short.indexOf(t);return r<0?e.long.indexOf(t):r}}function oe(e){return{addYears(t=1){let r=e.clone();return h(r,`${t} years`),r},addMonths(t=1){let r=e.clone();return h(r,`${t} months`),r},addWeeks(t=1){let r=e.clone();return h(r,`${t*7} days`),r},addDays(t=1){let r=e.clone();return h(r,`${t} days`),r},get nextYear(){let t=e.clone();return h(t,"1 year"),t},get nextWeek(){let t=e.clone();return h(t,"7 days"),t},get previousWeek(){let t=e.clone();return h(t,"subtract, 7 days"),t},get previousYear(){let t=e.clone();return h(t,"subtract, 1 year"),t},get nextMonth(){let t=e.clone();return h(t,"1 month"),t},get previousMonth(){let t=e.clone();return h(t,"subtract, 1 month"),t},get tomorrow(){let t=e.clone();return h(t,"1 day"),t},get yesterday(){let t=e.clone();return h(t,"subtract, 1 day"),t}}}function G(e){return+e.slice(e.indexOf("+")+1).replace(":","")||0}function ne(e){return e=e||p(),p(new Date(e.year,e.month,e.date.date))}function ae(e){let t=e.timeZone,r=new Date(e.year,0,1,14),n=new Date(new Date(r).setMonth(6)),o=Intl.DateTimeFormat("en-CA",{year:"numeric",timeZone:t,timeZoneName:"shortOffset"}),[a,u]=[o.format(r),o.format(n)];return G(a)-G(u)!==0}function se(e){return e.hasDST?new Date(e.year,0,1,14,e.hours,e.minutes,e.seconds).hours!==e.hours:!1}function ue(e,{locale:t,timeZone:r}={}){let n={locale:t||e.locale,timeZone:r||e.timeZone};return N(n)}function le(e,t){return!t instanceof Date?e:p(t,e.localeInfo)}function M(e){return!(Number.isNaN(parseInt(e))&&Number.isNaN(+e))}function L(e,t){let r=j(new Date(e,11,t));return r===1?L(e,t-1):r}function W(e,t){let r=e.month;switch(!0){case r<3:return t?1:"First";case r<6:return t?2:"Second";case r<9:return t?3:"Third";case r<12:return t?4:"Fourth"}}function j(e){let t=new Date(e),r=(t.getDay()+6)%7;t.setDate(t.getDate()-r+3);let n=t.valueOf();return t.setMonth(0,1),t.getDay()!==4&&t.setMonth(0,1+(4-t.getDay()+7)%7),1+Math.ceil((n-t)/6048e5)}var E=we;function we({instance:e,localeFormats:t,localeInfo:r}={}){let n={format(o,a){return R(e,o,a)},daysUntil(o){return B(e,o)},revalue(o){return e=le(e,o),e.clone()},firstWeekday({sunday:o=!1,midnight:a=!1}={}){return K(e,{sunday:o,midnight:a})},next(o){return v(e,{day:o,next:!0})},previous(o){return v(e,{day:o})},add(...o){return h(e,...o),e.clone()},subtract(...o){return h(e,...["subtract"].concat(o)),e.clone()},clone(){return p(new Date(e),e.localeInfo)},differenceTo(o){return Z({start:e.clone(),end:o})},relocate({locale:o,timeZone:a}={}){return r=ue(e,{locale:o,timeZone:a}),e.clone()},offsetFrom(o){return F(e,o)},between(o,a){return C(e,{start:o,end:a})},isPast(o){return C(e,{start:o,before:!0})},isFuture(o){return C(e,{start:o,before:!1})},set localeInfo({locale:o,timeZone:a}){r=N({locale:o,timeZone:a,validate:!0})},set year(o){isNumberOrString(o)&&e.setFullYear(+o)},set month(o){isNumberOrString(o)&&e.setMonth(+o-1)},set hours(o){isNumberOrString(o)&&e.setHours(+o)},set minutes(o){isNumberOrString(o)&&e.setMinutes(+o)},set seconds(o){isNumberOrString(o)&&e.setSeconds(+o)},set milliseconds(o){isNumberOrString(o)&&e.setMilliseconds(+o)},set time({hours:o,minutes:a,seconds:u,milliseconds:c}={}){return re(e,{hours:o,minutes:a,seconds:u,milliseconds:c})},set date({year:o,month:a,date:u}={}){return te(e,{year:o,month:a,date:u})},get age(){return e.differenceTo(new Date).years},get ageParts(){return e.differenceTo(new Date).full},get localeString(){return P(e)},get local(){return P(e)},get ISO(){return e.toISOString()},get isLeapYear(){return new Date(e.getFullYear(),2,0).getDate()===29},get names(){return J(e)},get daysInMonth(){return A(e)},get daysThisMonth(){return A(e)},get localeInfo(){return r},get timeZone(){return(r||N()).timeZone},get locale(){return(r||N()).locale},get formatStr(){return t},get year(){return e.getFullYear()},get month(){return e.date.month},get dateSingle(){return e.date.date},get hours(){return e.time.hours},get minutes(){return e.time.minutes},get seconds(){return e.time.seconds},get milliseconds(){return e.getMilliseconds()},get removeTime(){return ne(e)},get time(){return Q(e)},get timeValues(){return U(e)},get dateValues(){return k(e)},get dateTimeValues(){return ee(e)},get date(){return X(e)},get dateTime(){return Object.freeze({...e.date,...e.time})},get UTC(){return e.clone().relocate({locale:e.locale,timeZone:"Etc/UTC"})},get UTCDiff(){return F(e)},get offsetFromUTC(){return F(e)},get day(){return e.getDay()},get dayName(){return e.names.dayName},get weeknr(){return j(e)},get weeksInYear(){return L(e.year,31)},get weekDay(){return e.names.dayName},get monthName(){return e.names.monthName},get quarter(){return W(e)},get quarterNr(){return W(e,!0)},get hasDST(){return ae(e)},get DSTActive(){return se(e)},get value(){return e.valueOf()}};return Object.defineProperties(n,{proxy:{value(o,a){return e=new Proxy(o,a),e},enumerable:!1},keys:{get(){return Object.keys(n).sort((o,a)=>o.localeCompare(a))}},addExtra:{value(o){let a=oe(o);Object.entries(Object.getOwnPropertyDescriptors(a)).forEach(([u,c])=>Object.defineProperty(n,u,c))},enumerable:!1}}),n}Symbol.esdProxy=Symbol.for("esdProxy");function ce(e){return{get(r,n){return n in r&&r[n]instanceof Function?(...o)=>r[n](...o):n in r?r[n]:n in e?e[n]:!0},set(r,n,o){return typeof n!="symbol"&&n in e?(e[n]=o,o??!0):Reflect.set(...arguments)},has:(r,n)=>n in e||n in r};function t(r,n,o){return n in r&&r[n]instanceof Function?(...a)=>r[n].call(r,...a):r[n]}}var p=be();function be(){return Y(e);function e(t,r){let n=t?.locale||t?.timeZone?new Date:z(t),o=E();o.localeInfo=t?.locale||t?.timeZone?t:r||O();let a=o.proxy(new Date(n),ce(o));return a.addExtra(a),Object.freeze(a)}}export{p as default};
